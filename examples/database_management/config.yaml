# Example Configuration for Database Management
# This config demonstrates database connection, migration, and backup settings

# Database connection settings
databases:
  # Development SQLite database
  development:
    type: sqlite
    database: development.db
    host: localhost
    username: dev_user
    password: dev_pass

  # Production PostgreSQL database
  production:
    type: postgresql
    host: prod.example.com
    port: 5432
    database: production
    username: prod_user
    password: prod_pass
    ssl_mode: require
    connection_pool_size: 10

# Schema generation settings
schema:
  # Target database type for schema generation
  target_database: sqlite

  # Schema naming convention
  naming_convention: snake_case

  # Include foreign key constraints
  include_foreign_keys: true

  # Include indexes
  include_indexes: true

  # Generate migration files
  generate_migrations: true

# Migration settings
migrations:
  # Migration directory
  directory: migrations

  # Migration file naming pattern
  naming_pattern: "{timestamp}_{name}.sql"

  # Auto-generate rollback migrations
  auto_rollback: true

  # Migration timeout (seconds)
  timeout: 300

  # Dry run mode
  dry_run: false

# Backup settings
backup:
  # Backup directory
  directory: backups

  # Backup naming pattern
  naming_pattern: "{database}_{timestamp}.backup"

  # Compression settings
  compression:
    enabled: true
    algorithm: gzip
    level: 6

  # Retention policy
  retention:
    keep_daily: 7
    keep_weekly: 4
    keep_monthly: 12

  # Encryption settings
  encryption:
    enabled: false
    algorithm: aes256

# Monitoring settings
monitoring:
  # Metrics collection interval (seconds)
  interval: 60

  # Metrics to collect
  metrics:
    - connection_count
    - query_count
    - slow_queries
    - table_sizes
    - index_usage

  # Alert thresholds
  thresholds:
    max_connections: 100
    slow_query_threshold: 5.0  # seconds
    max_table_size: 1000000   # rows

  # Performance monitoring
  performance:
    enabled: true
    query_logging: true
    execution_plan_analysis: true

# Optimization settings
optimization:
  # Auto-optimization settings
  auto_optimize:
    enabled: true
    schedule: daily
    maintenance_window: "02:00-04:00"

  # Optimization types
  types:
    - vacuum
    - reindex
    - analyze
    - cluster

  # Index optimization
  indexes:
    unused_threshold: 30  # days
    rebuild_threshold: 0.3  # fragmentation ratio

# Output settings for example results
output:
  format: json
  file: output/database_management_results.json
  schema_dir: output/schemas

# Logging settings
logging:
  level: INFO
  file: logs/database_management.log
